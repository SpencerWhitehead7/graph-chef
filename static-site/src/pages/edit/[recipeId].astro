---
import type { RecipeSerialized } from "../../../../shared"
import Builder from "../../components/Builder"
import Layout from "../../layouts/Layout.astro"

export const getStaticPaths = async () => {
  const recipes = await Astro.glob<{ default: RecipeSerialized }>("../../recipeData/*.ts")

  return recipes.map(({ default: recipe }) => ({
    params: {
      recipeId: String(recipe.id),
    },
    props: {
      recipe,
    },
  }))
}

const { recipe } = Astro.props
---

<Layout title={`Graph Chef - Edit ${recipe.title}`}>
  <Builder {recipe} client:only="preact" />
</Layout>
